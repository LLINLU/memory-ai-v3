# Python API Requirements for TechTree Data Population

## üéØ Overview

**Purpose**: Python API that receives a tree scenario and returns it enriched with research papers and use cases.

## üèóÔ∏è Tree Structure

- **Level 0**: Root (single root node per tree)
- **Level 1**: **Scenarios** or **How1** (TED scenarios - these get processed individually)
- **Level 2**: Purpose (goals within each scenario)
- **Level 3**: Function (capabilities to achieve purposes)
- **Level 4+**: Measure, Measure2, Measure3... (technical implementations)

## üìä API Specification

### Endpoint

```
POST /api/v1/enrich-tree
Content-Type: application/json
```

```typescript
// =============================================================================
// INPUT: TREE STRUCTURE TO PYTHON API
// =============================================================================

/**
 * Complete scenario tree structure sent to Python API for processing
 */
interface ScenarioTreeInput {
  treeId: string; // Unique tree identifier
  scenarioNode: TreeNodeInput; // Level-1 scenario node with complete subtree
}

/**
 * Individual tree node structure for API input
 */
interface TreeNodeInput {
  id: string;
  title: string;
  description?: string;
  level: number; // 1=Scenario(How1 for Fast), 2=Purpose, 3=Function, 4+=Measure
  children: TreeNodeInput[]; // Nested child nodes
  keywords?: string[]; // Optional keywords for better matching
  context?: string; // Additional context for this node
}

// =============================================================================
// OUTPUT: ENRICHED TREE FROM PYTHON API
// =============================================================================

/**
 * Complete enriched scenario tree response from Python API
 */
interface EnrichedScenarioResponse {
  treeId: string;
  scenarioNode: EnrichedTreeNode; // Level-1 scenario with enriched subtree
}

/**
 * Individual enriched tree node with generated data
 */
interface EnrichedTreeNode {
  id: string;
  title: string;
  description?: string;
  level: number; // 1=Scenario, 2=Purpose, 3=Function, 4+=Measure
  children: EnrichedTreeNode[];

  // Generated data for this node
  papers: Paper[]; // Generated papers for this node
  useCases: UseCase[]; // Generated use cases for this node
}
```

### Paper Object

```typescript
interface Paper {
  id: string; // Unique identifier (generated by API)
  title: string; // Paper title
  authors: string; // Comma-separated author names
  journal: string; // Publication journal/conference
  tags: string[]; // Relevant tags
  abstract: string; // Paper abstract
  date: string; // Publication date (YYYY-MM-DD)
  citations: number; // Citation count
  region: "domestic" | "international"; // Geographic origin
  doi?: string; // Optional DOI
  url?: string; // Optional paper URL
}
```

### Use Case Object

```typescript
interface UseCase {
  id: string; // Unique identifier (generated by API)
  title: string; // Use case title
  description: string; // Detailed description
  releases: number; // Number of releases/updates
  pressReleases: PressRelease[]; // Related press releases
}

interface PressRelease {
  title: string;
  url: string;
  date?: string; // YYYY-MM-DD format
}
```

## üîå API Endpoint Specification

### Single Endpoint

```
POST /api/v1/enrich-tree
Content-Type: application/json
```

### Example Request Body

```json
{
  "treeId": "climate-tech-2024-001",
  "scenarioNode": {
    "id": "renewable-storage-scenario",
    "title": "Renewable Energy Storage Solutions",
    "description": "Advanced storage technologies for renewable energy systems",
    "level": 1,
    "children": [
      {
        "id": "battery-storage",
        "title": "Battery Storage Systems",
        "description": "Large-scale battery storage for grid applications",
        "level": 2,
        "children": [
          {
            "id": "lithium-ion-grid",
            "title": "Grid-Scale Lithium-Ion Storage",
            "description": "Large-scale lithium-ion battery systems for utility grid energy storage applications",
            "level": 3,
            "children": [],
            "keywords": ["lithium-ion", "grid storage", "utility scale"]
          }
        ]
      }
    ]
  }
}
```

### Example Response Body

```json
{
  "treeId": "climate-tech-2024-001",
  "scenarioNode": {
    "id": "renewable-storage-scenario",
    "title": "Renewable Energy Storage Solutions",
    "description": "Advanced storage technologies for renewable energy systems",
    "level": 1,
    "papers": [
      {
        "id": "paper-generated-001",
        "title": "Grid-Scale Energy Storage: Current Technologies and Future Prospects",
        "authors": "Zhang, L., Schmidt, M., Tanaka, H.",
        "journal": "Renewable Energy Systems Journal",
        "tags": ["energy storage", "grid scale", "renewable energy"],
        "abstract": "This review examines current grid-scale energy storage technologies...",
        "date": "2024-03-15",
        "citations": 45,
        "region": "international",
        "doi": "10.1016/j.resys.2024.03.015"
      } //and more
    ],
    "useCases": [
      {
        "id": "usecase-generated-001",
        "title": "Tesla Megapack Grid Storage Deployment",
        "description": "Large-scale deployment of Tesla Megapack systems for grid stabilization in California...",
        "releases": 8,
        "pressReleases": [
          {
            "title": "Tesla Completes World's Largest Battery Storage Project",
            "url": "https://tesla.com/news/megapack-deployment-2024",
            "date": "2024-02-15"
          }
        ]
      } //and more
    ],
    "children": [
      // ... nested structure with data for child nodes
    ]
  }
}
```


# Python API Requirements for TechTree Data Population

## üéØ Overview

**Purpose**: Python API that receives a tree scenario and returns it enriched with research papers and use cases.

## üèóÔ∏è Tree Structure

- **Level 0**: Root (single root node per tree)
- **Level 1**: **Scenarios** or **How1** (TED scenarios - these get processed individually)
- **Level 2**: Purpose (goals within each scenario)
- **Level 3**: Function (capabilities to achieve purposes)
- **Level 4+**: Measure, Measure2, Measure3... (technical implementations)

## üìä API Specification

### Endpoint

```
POST /api/v1/enrich-tree
Content-Type: application/json
```

```typescript
// =============================================================================
// INPUT: TREE STRUCTURE TO PYTHON API
// =============================================================================

/**
 * Complete scenario tree structure sent to Python API for processing
 */
interface ScenarioTreeInput {
  treeId: string; // Unique tree identifier
  scenarioNode: TreeNodeInput; // Level-1 scenario node with complete subtree
}

/**
 * Individual tree node structure for API input
 */
interface TreeNodeInput {
  id: string;
  title: string;
  description?: string;
  level: number; // 1=Scenario(How1 for Fast), 2=Purpose, 3=Function, 4+=Measure
  children: TreeNodeInput[]; // Nested child nodes
  keywords?: string[]; // Optional keywords for better matching
  context?: string; // Additional context for this node
}

// =============================================================================
// OUTPUT: ENRICHED TREE FROM PYTHON API
// =============================================================================

/**
 * Complete enriched scenario tree response from Python API
 */
interface EnrichedScenarioResponse {
  treeId: string;
  scenarioNode: EnrichedTreeNode; // Level-1 scenario with enriched subtree
}

/**
 * Individual enriched tree node with generated data
 */
interface EnrichedTreeNode {
  id: string;
  title: string;
  description?: string;
  level: number; // 1=Scenario, 2=Purpose, 3=Function, 4+=Measure
  children: EnrichedTreeNode[];

  // Generated data for this node
  papers: Paper[]; // Generated papers for this node
  useCases: UseCase[]; // Generated use cases for this node
}
```

### Paper Object

```typescript
interface Paper {
  id: string; // Unique identifier (generated by API)
  title: string; // Paper title
  authors: string; // Comma-separated author names
  journal: string; // Publication journal/conference
  tags: string[]; // Relevant tags
  abstract: string; // Paper abstract
  date: string; // Publication date (YYYY-MM-DD)
  citations: number; // Citation count
  region: "domestic" | "international"; // Geographic origin
  doi?: string; // Optional DOI
  url?: string; // Optional paper URL
}
```

### Use Case Object

```typescript
interface UseCase {
  id: string; // Unique identifier (generated by API)
  title: string; // Use case title
  description: string; // Detailed description
  releases: number; // Number of releases/updates
  pressReleases: PressRelease[]; // Related press releases
}

interface PressRelease {
  title: string;
  url: string;
  date?: string; // YYYY-MM-DD format
}
```

## üîå API Endpoint Specification

### Single Endpoint

```
POST /api/v1/enrich-tree
Content-Type: application/json
```

### Example Request Body

```json
{
  "treeId": "climate-tech-2024-001",
  "scenarioNode": {
    "id": "renewable-storage-scenario",
    "title": "Renewable Energy Storage Solutions",
    "description": "Advanced storage technologies for renewable energy systems",
    "level": 1,
    "children": [
      {
        "id": "battery-storage",
        "title": "Battery Storage Systems",
        "description": "Large-scale battery storage for grid applications",
        "level": 2,
        "children": [
          {
            "id": "lithium-ion-grid",
            "title": "Grid-Scale Lithium-Ion Storage",
            "description": "Large-scale lithium-ion battery systems for utility grid energy storage applications",
            "level": 3,
            "children": [],
            "keywords": ["lithium-ion", "grid storage", "utility scale"]
          }
        ]
      }
    ]
  }
}
```

### Example Response Body

```json
{
  "treeId": "climate-tech-2024-001",
  "scenarioNode": {
    "id": "renewable-storage-scenario",
    "title": "Renewable Energy Storage Solutions",
    "description": "Advanced storage technologies for renewable energy systems",
    "level": 1,
    "papers": [
      {
        "id": "paper-generated-001",
        "title": "Grid-Scale Energy Storage: Current Technologies and Future Prospects",
        "authors": "Zhang, L., Schmidt, M., Tanaka, H.",
        "journal": "Renewable Energy Systems Journal",
        "tags": ["energy storage", "grid scale", "renewable energy"],
        "abstract": "This review examines current grid-scale energy storage technologies...",
        "date": "2024-03-15",
        "citations": 45,
        "region": "international",
        "doi": "10.1016/j.resys.2024.03.015"
      } //and more
    ],
    "useCases": [
      {
        "id": "usecase-generated-001",
        "title": "Tesla Megapack Grid Storage Deployment",
        "description": "Large-scale deployment of Tesla Megapack systems for grid stabilization in California...",
        "releases": 8,
        "pressReleases": [
          {
            "title": "Tesla Completes World's Largest Battery Storage Project",
            "url": "https://tesla.com/news/megapack-deployment-2024",
            "date": "2024-02-15"
          }
        ]
      } //and more
    ],
    "children": [
      // ... nested structure with data for child nodes
    ]
  }
}
```

## üöÄ Implementation Guidelines

### Core Requirements

1. **Input**: Receive tree scenario with subtree structure
2. **Processing**: Generate relevant papers and use cases for each node
3. **Output**: Return enriched tree matching exact frontend sidebar structure
